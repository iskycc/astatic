webpackJsonp([1],{BDvS:function(e,t){},lmfZ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("woOf"),r=n.n(o),a=n("Xxa5"),s=n.n(a),c=n("exGp"),i=n.n(c),u=n("pFYg"),l=n.n(u);!function(e){if(void 0===e)throw new Error("Geetest requires browser environment");var t=e.document,n=e.Math,o=t.getElementsByTagName("head")[0];function r(e){this._obj=e}function a(e){var t=this;new r(e)._each(function(e,n){t[e]=n})}r.prototype={_each:function(e){var t=this._obj;for(var n in t)t.hasOwnProperty(n)&&e(n,t[n]);return this}},a.prototype={api_server:"api.geetest.com",protocol:"http://",typePath:"/gettype.php",fallback_config:{slide:{static_servers:["static.geetest.com","dn-staticdown.qbox.me"],type:"slide",slide:"/static/js/geetest.0.0.0.js"},fullpage:{static_servers:["static.geetest.com","dn-staticdown.qbox.me"],type:"fullpage",fullpage:"/static/js/fullpage.0.0.0.js"}},_get_fallback_config:function(){return s(this.type)?this.fallback_config[this.type]:this.new_captcha?this.fallback_config.fullpage:this.fallback_config.slide},_extend:function(e){var t=this;new r(e)._each(function(e,n){t[e]=n})}};var s=function(e){return"string"==typeof e},c=function(e){return"object"===(void 0===e?"undefined":l()(e))&&null!==e},i=/Mobi/i.test(navigator.userAgent)?3:0,u={},f={},p=function(e,t,n,o){t=function(e){return e.replace(/^https?:\/\/|\/$/g,"")}(t);var a=function(e){return 0!==(e=e.replace(/\/+/g,"/")).indexOf("/")&&(e="/"+e),e}(n)+function(e){if(!e)return"";var t="?";return new r(e)._each(function(e,n){(s(n)||function(e){return"number"==typeof e}(n)||function(e){return"boolean"==typeof e}(n))&&(t=t+encodeURIComponent(e)+"="+encodeURIComponent(n)+"&")}),"?"===t&&(t=""),t.replace(/&$/,"")}(o);return t&&(a=e+t+a),a},d=function(e,n,r,a,s,c,i){!function u(l){!function(e,n){var r=t.createElement("script");r.charset="UTF-8",r.async=!0,r.onerror=function(){n(!0)};var a=!1;r.onload=r.onreadystatechange=function(){a||r.readyState&&"loaded"!==r.readyState&&"complete"!==r.readyState||(a=!0,setTimeout(function(){n(!1)},0))},r.src=e,o.appendChild(r)}(p(r,a[l],s,c),function(t){if(t)if(l>=a.length-1){if(i(!0),n){e.error_code=508;var o=r+a[l]+s;m(e,o)}}else u(l+1);else i(!1)})}(0)},g=function(t,o,r,a){if(c(r.getLib))return r._extend(r.getLib),void a(r);if(r.offline)a(r._get_fallback_config());else{var s="geetest_"+(parseInt(1e4*n.random())+(new Date).valueOf());e[s]=function(t){"success"==t.status?a(t.data):t.status?a(r._get_fallback_config()):a(t),e[s]=void 0;try{delete e[s]}catch(e){}},d(r,!0,r.protocol,t,o,{gt:r.gt,callback:s},function(e){e&&a(r._get_fallback_config())})}},m=function(e,t){var n,o,r,a,s,c,u;d(e,!1,e.protocol,["monitor.geetest.com"],"/monitor/send",{time:(n=new Date,o=n.getFullYear(),r=n.getMonth()+1,a=n.getDate(),s=n.getHours(),c=n.getMinutes(),u=n.getSeconds(),r>=1&&r<=9&&(r="0"+r),a>=0&&a<=9&&(a="0"+a),s>=0&&s<=9&&(s="0"+s),c>=0&&c<=9&&(c="0"+c),u>=0&&u<=9&&(u="0"+u),o+"-"+r+"-"+a+" "+s+":"+c+":"+u),captcha_id:e.gt,challenge:e.challenge,pt:i,exception_url:t,error_code:e.error_code},function(e){})},v=function(e,t){var n={networkError:"网络错误",gtTypeError:"gt字段不是字符串类型"};if("function"!=typeof t.onError)throw new Error(n[e]);t.onError(n[e])};(e.Geetest||t.getElementById("gt_lib"))&&(f.slide="loaded"),e.initGeetest=function(t,n){var o=new a(t);t.https?o.protocol="https://":t.protocol||(o.protocol=e.location.protocol+"//"),"050cffef4ae57b5d5e529fea9540b0d1"!==t.gt&&"3bd38408ae4af923ed36e13819b14d42"!==t.gt||(o.apiserver="yumchina.geetest.com/",o.api_server="yumchina.geetest.com"),c(t.getType)&&o._extend(t.getType),g([o.api_server||o.apiserver],o.typePath,o,function(t){var r=t.type,a=function(){o._extend(t),n(new e.Geetest(o))};u[r]=u[r]||[];var s=f[r]||"init";"init"===s?(f[r]="loading",u[r].push(a),d(o,!0,o.protocol,t.static_servers||t.domains,t[r]||t.path,null,function(e){if(e)f[r]="fail",v("networkError",o);else{f[r]="loaded";for(var t=u[r],n=0,a=t.length;n<a;n+=1){var s=t[n];"function"==typeof s&&s()}u[r]=[]}})):"loaded"===s?a():"fail"===s?v("networkError",o):"loading"===s&&u[r].push(a)})}}(window);var f={data:function(){return{captchaObj:null,year:(new Date).getFullYear(),form:{username:null,password:null,ip:null}}},mounted:function(){var e=this;return i()(s.a.mark(function t(){var n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/user/login",{params:{t:(new Date).getTime()},headers:{loadingNo:!0}});case 2:n=t.sent,console.log(n),window.initGeetest({gt:n.gt,challenge:n.challenge,offline:!n.success,new_captcha:n.new_captcha,product:"popup",width:"320px"},e.handler);case 5:case"end":return t.stop()}},t,e)}))()},methods:{handler:function(e){this.captchaObj=e,e.appendTo("#gt"),e.onReady(function(){}),e.onSuccess(function(){})},checkIsDoCode:function(){return this.captchaObj.getValidate()},doLogin:function(){var e=this;return i()(s.a.mark(function t(){var n,o;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.checkIsDoCode(),e.form.username){t.next=3;break}return t.abrupt("return",e.$message({message:"请输入用户名",type:"warning"}));case 3:if(e.form.password){t.next=5;break}return t.abrupt("return",e.$message({message:"请输入密码",type:"warning"}));case 5:if(n){t.next=7;break}return t.abrupt("return",e.$message({message:"请完成图形验证",type:"warning"}));case 7:return n=r()(n,e.form),o=void 0,t.prev=9,t.next=12,e.$http.post("/user/login",n);case 12:o=t.sent,t.next=18;break;case 15:t.prev=15,t.t0=t.catch(9),e.$message.error(t.t0);case 18:e.captchaObj.reset(),console.log(o),e.$store.commit("setToken",o.token),e.$router.push("/home"),e.$message({message:"登录成功",type:"success"});case 23:case"end":return t.stop()}},t,e,[[9,15]])}))()}}},p={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main"},[n("section",{staticClass:"box"},[n("div",{staticClass:"logo"},[e._v("内部管理系统")]),e._v(" "),n("div",[n("span",{staticClass:"iconfont icon-yonghu",style:{color:e.form.username?"#3388ff":""}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.username,expression:"form.username"}],attrs:{type:"text",placeholder:"请输入用户名"},domProps:{value:e.form.username},on:{input:function(t){t.target.composing||e.$set(e.form,"username",t.target.value)}}})]),e._v(" "),n("div",[n("span",{staticClass:"iconfont icon-password",style:{color:e.form.password?"#3388ff":""}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.form.password,expression:"form.password"}],attrs:{type:"password",autocomplete:"new-password",placeholder:"请输入密码"},domProps:{value:e.form.password},on:{input:function(t){t.target.composing||e.$set(e.form,"password",t.target.value)}}})]),e._v(" "),n("div",{attrs:{id:"gt"}},[e.captchaObj?e._e():n("span",{staticClass:"el-icon-loading"}),e._v(" "),e.captchaObj?e._e():n("span",[e._v("验证码加载中")])]),e._v(" "),n("div",[n("button",{on:{click:e.doLogin}},[e._v("登录")])])])])},staticRenderFns:[]};var d=n("VU/8")(f,p,!1,function(e){n("BDvS")},"data-v-4ce7ab4f",null);t.default=d.exports}});